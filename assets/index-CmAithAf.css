:root{--bg-primary: #ffffff;--bg-secondary: #f8f9fa;--bg-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);--text-primary: #333333;--text-secondary: #666666;--border-color: #e0e0e0;--shadow-color: rgba(0, 0, 0, .1);--toolbar-bg: #ffffff;--button-bg: #ffffff;--button-hover: #f8f9ff;--button-active: #f0fff0;--accent-color: #667eea;--success-color: #4CAF50;--canvas-bg: #ffffff}[data-theme=dark]{--bg-primary: #1e1e1e;--bg-secondary: #2d2d2d;--bg-gradient: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);--text-primary: #ffffff;--text-secondary: #cccccc;--border-color: #404040;--shadow-color: rgba(0, 0, 0, .3);--toolbar-bg: #2d2d2d;--button-bg: #3d3d3d;--button-hover: #4d4d4d;--button-active: #5d5d5d;--accent-color: #7289da;--success-color: #5cb85c;--canvas-bg: #2d2d2d;--img-filter: invert(1) brightness(.8)}*{box-sizing:border-box;margin:0;padding:0}body{background:var(--bg-secondary);color:var(--text-primary);transition:background-color .3s ease,color .3s ease}.start-screen{position:fixed;top:0;left:0;width:100vw;height:100vh;background:var(--bg-gradient);display:flex;align-items:center;justify-content:center;z-index:1000;font-family:Noto Sans JP,Hiragino Sans,Yu Gothic,Meiryo,sans-serif}.start-screen.hidden{display:none}.start-container{background:var(--bg-primary);border-radius:20px;box-shadow:0 20px 40px var(--shadow-color);padding:40px;max-width:500px;width:90vw;text-align:center;animation:slideIn .6s ease-out}@keyframes slideIn{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.start-header{margin-bottom:30px}.app-title{font-size:28px;font-weight:700;color:var(--text-primary);margin-bottom:8px}.app-description{font-size:16px;color:var(--text-secondary);margin-bottom:0}.start-options{display:flex;flex-direction:column;gap:16px;margin-bottom:30px}.start-option-btn{background:var(--bg-primary);border:2px solid var(--border-color);border-radius:12px;padding:20px;cursor:pointer;transition:all .3s ease;text-align:left;width:100%;color:var(--text-primary)}.start-option-btn:hover{border-color:var(--accent-color);background:var(--button-hover);transform:translateY(-2px);box-shadow:0 4px 12px #667eea26}.start-option-btn.has-data{border-color:var(--success-color);background:#f8fff8}.start-option-btn.has-data:hover{border-color:#4caf50;background:#f0fff0}.option-content{display:flex;align-items:center;gap:16px}.option-icon{font-size:32px;margin-right:0}.option-content h3{font-size:18px;font-weight:600;color:#333;margin-bottom:4px}.option-content p{font-size:14px;color:#666;margin:0}.start-footer{display:flex;align-items:center;justify-content:space-between;padding-top:20px;border-top:1px solid #eee}.quick-links{display:flex;gap:16px}.quick-link{color:#667eea;text-decoration:none;font-size:14px;transition:color .3s ease}.quick-link:hover{color:#764ba2;text-decoration:underline}.app-version{font-size:12px;color:#aaa}@media (max-width: 600px){.start-container{padding:30px 20px;margin:20px}.app-title{font-size:24px}.start-option-btn{padding:16px}.option-icon{font-size:28px;margin-right:12px}.start-footer{flex-direction:column;gap:12px}.sample-grid{grid-template-columns:repeat(auto-fit,minmax(120px,1fr))}}body{font-family:Noto Sans JP,Hiragino Sans,Yu Gothic,Meiryo,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;background-color:#f5f5f5;height:100vh;overflow:hidden;#stroke-color{width:36px;height:36px}#font-size{min-width:70px;height:36px;font-size:12px}user-select:none;touch-action:none}#app{display:flex;flex-direction:column;height:100vh}.toolbar{background:var(--toolbar-bg);border-bottom:1px solid var(--border-color);padding:10px;display:flex;align-items:flex-start;gap:15px;flex-wrap:wrap;box-shadow:0 2px 4px var(--shadow-color);min-height:60px}.tool-group{display:flex;gap:5px;align-items:center;flex-wrap:wrap}.tool-btn{background:var(--button-bg);border:2px solid var(--border-color);border-radius:8px;padding:8px;cursor:pointer;transition:all .3s ease;width:48px;height:48px;display:flex;align-items:center;justify-content:center;font-size:20px;user-select:none;flex-shrink:0;box-sizing:border-box;color:var(--text-primary)}.tool-btn img{width:32px;height:32px;object-fit:contain;pointer-events:none;filter:var(--img-filter, none)}.tool-btn:hover{background:var(--button-hover);border-color:var(--accent-color)}.tool-btn.active{background:#007acc;color:#fff;transform:scale(.95)}#export-btn.active{background:#007acc;color:#fff}.tool-btn:active{transform:scale(.95)}.preset-text-container{display:flex;align-items:center;gap:8px;margin:0 8px;padding:10px;background:var(--bg-primary);border:1px solid var(--border-color);border-radius:6px;height:48px;box-sizing:border-box}.preset-text-select{background:var(--button-bg);border:1px solid var(--border-color);border-radius:4px;padding:5px 8px;font-size:12px;color:var(--text-primary);cursor:pointer;min-width:120px;max-width:150px;height:28px;box-sizing:border-box}.preset-text-select:focus{outline:none;border-color:var(--accent-color)}.preset-text-btn{background:var(--accent-color);color:#fff;border:none;padding:4px 8px;border-radius:4px;font-size:12px;font-weight:500;cursor:pointer;transition:all .2s ease;white-space:nowrap;width:auto;height:28px;min-width:44px;box-sizing:border-box;line-height:1}@media (pointer: coarse) and (any-hover: none),(-webkit-touch-callout: default),(max-width: 1366px) and (max-height: 1024px){.preset-text-btn{height:28px!important;min-height:28px!important;max-height:28px!important;padding:2px 8px!important;font-size:11px!important;line-height:1.2!important;display:flex!important;align-items:center!important;justify-content:center!important}}.preset-text-btn:hover{background:var(--accent-hover);transform:translateY(-1px)}.preset-text-btn:active{transform:translateY(0)}.preset-text-btn:disabled{background:var(--border-color);cursor:not-allowed;transform:none}#home-btn{background:#4caf50;color:#fff;border:2px solid #45a049}#home-btn:hover{background:#45a049;transform:scale(1.05)}#home-btn:active{background:#3d8b40}#stroke-width{width:100px;height:6px;border-radius:3px;background:#e0e0e0;outline:none;-webkit-appearance:none}#stroke-width::-webkit-slider-thumb{appearance:none;width:20px;height:20px;border-radius:50%;background:#007aff;cursor:pointer}.pen-width-group{display:flex;align-items:center;gap:8px;padding:4px 8px;background:#f8f9fa;border-radius:8px;border:1px solid #e0e0e0}.width-label{font-size:12px;color:#666;white-space:nowrap}#pen-width{width:80px;height:4px;border-radius:2px;background:#e0e0e0;outline:none;-webkit-appearance:none}#pen-width::-webkit-slider-thumb{appearance:none;width:16px;height:16px;border-radius:50%;background:#007aff;cursor:pointer}.pen-preview{width:20px;height:20px;border-radius:50%;background:#000;border:1px solid #ddd;flex-shrink:0}.line-control-group{display:flex;align-items:center;gap:8px}.line-style-btn{width:50px;height:30px;border:2px solid #e0e0e0;border-radius:6px;background:#fff;cursor:pointer;font-size:14px;font-weight:700;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.line-style-btn:hover{border-color:#007aff;background:#f0f8ff}.line-style-btn.solid{color:#333}.line-style-btn.dashed{color:#666}.line-style-btn.arrow{color:#007aff;border-color:#007aff;background:#f0f8ff}.line-arrow-btn{width:40px;height:30px;border:2px solid #e0e0e0;border-radius:6px;background:#fff;cursor:pointer;font-size:14px;font-weight:700;display:flex;align-items:center;justify-content:center;transition:all .2s ease;color:#666}.line-arrow-btn:hover{border-color:#007aff;background:#f0f8ff}.line-arrow-btn.active{border-color:#007aff;background:#e7f3ff;color:#007aff}.eraser-size-group{display:flex;align-items:center;gap:8px;padding:4px 8px;background:#fff5f5;border-radius:8px;border:1px solid #ffb3b3}#eraser-size{width:80px;height:4px;border-radius:2px;background:#fcc;outline:none;-webkit-appearance:none}#eraser-size::-webkit-slider-thumb{appearance:none;width:16px;height:16px;border-radius:50%;background:#ff6b6b;cursor:pointer}.eraser-preview{width:16px;height:16px;border-radius:50%;background:#ff6b6b66;border:2px dashed #ff6b6b;flex-shrink:0}#stroke-color{width:44px;height:44px;border:2px solid #e0e0e0;border-radius:8px;cursor:pointer;background:none;padding:0}#font-size{padding:8px;border:2px solid #e0e0e0;border-radius:8px;background:#fff;cursor:pointer;font-size:14px;min-width:80px;height:44px}#font-size:hover{border-color:silver}#font-size:focus{outline:none;border-color:#007aff}.status-group{display:flex;gap:5px;align-items:center}.shift-indicator{background:#f0f0f0;border:2px solid #e0e0e0;border-radius:6px;padding:6px 10px;font-size:12px;font-weight:700;color:#666;transition:all .2s ease;opacity:.5}.shift-indicator.active{background:#007aff;border-color:#007aff;color:#fff;opacity:1;transform:scale(1.05)}.canvas-container{flex:1;position:relative;overflow:hidden}#drawing-canvas{display:block;background:var(--canvas-bg);cursor:crosshair;width:100%;height:100%}#drawing-canvas.drawing{cursor:crosshair}#drawing-canvas.no-grid{background-image:none;background:var(--canvas-bg)}#drawing-canvas.shift-mode{box-shadow:inset 0 0 0 2px #007aff}#drawing-canvas.tool-pen{cursor:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><circle cx="8" cy="8" r="2" fill="black"/></svg>') 8 8,crosshair}#drawing-canvas.tool-eraser{cursor:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><circle cx="10" cy="10" r="8" fill="rgba(255,107,107,0.3)" stroke="%23FF6B6B" stroke-width="2" stroke-dasharray="3,3"/><circle cx="10" cy="10" r="2" fill="%23FF6B6B"/></svg>') 10 10,crosshair}#drawing-canvas.tool-line,#drawing-canvas.tool-rectangle,#drawing-canvas.tool-circle{cursor:crosshair}#drawing-canvas.tool-text-horizontal,#drawing-canvas.tool-text-vertical{cursor:text}.text-input-overlay{outline:none;box-shadow:0 2px 8px #007bff4d;transition:all .2s ease;cursor:text}.text-input-overlay:focus{box-shadow:0 2px 12px #007bff80}.text-input-overlay.vertical,.text-input-overlay.vertical[contenteditable]{cursor:text!important}@media (max-width: 768px){.toolbar{padding:8px;gap:8px}.tool-group{gap:3px}.tool-btn{padding:6px;font-size:14px;min-width:36px;min-height:36px}#stroke-width{width:70px}#stroke-color{width:36px;height:36px}}@media (max-width: 480px){.toolbar{padding:5px;gap:5px}.tool-group{gap:2px}.tool-btn{padding:4px;font-size:12px;min-width:32px;min-height:32px}#stroke-width{width:60px}#stroke-color{width:32px;height:32px}#font-size{min-width:60px;height:32px;font-size:11px}}@media (pointer: coarse){.tool-btn{min-width:48px;min-height:48px}}.tool-btn{transition:all .2s cubic-bezier(.4,0,.2,1)}.canvas-container{transition:transform .3s ease}.stair-size-btn{padding:4px 8px;margin:0 2px;border:1px solid #ddd;background:#f8f8f8;color:#333;border-radius:4px;cursor:pointer;font-size:12px;min-width:28px;transition:all .2s ease}.stair-size-btn:hover{background:#e8e8e8;border-color:#ccc}.stair-size-btn.active{background:#007acc;color:#fff;border-color:#005a9e}.text-input-overlay.vertical{writing-mode:vertical-rl!important;-webkit-writing-mode:vertical-rl!important;-ms-writing-mode:tb-rl!important;text-orientation:upright!important;-webkit-text-orientation:upright!important;direction:ltr!important;position:relative}.text-input-overlay.vertical:before{content:"縦書きテキスト";position:absolute;inset:0;color:#ccc;pointer-events:none;writing-mode:vertical-rl;-webkit-writing-mode:vertical-rl;text-orientation:upright;-webkit-text-orientation:upright;padding:4px;z-index:-1}.text-input-overlay.vertical:not(:empty):before{display:none}.text-input-overlay.horizontal{writing-mode:horizontal-tb!important;-webkit-writing-mode:horizontal-tb!important;-ms-writing-mode:lr-tb!important;text-orientation:mixed!important;-webkit-text-orientation:mixed!important;direction:ltr!important}.text-input-overlay[contenteditable]{outline:none;white-space:pre-wrap;word-wrap:break-word;overflow-wrap:break-word;line-height:1.5}.text-input-overlay[contenteditable].vertical{white-space:pre-wrap!important;overflow-wrap:break-word;word-break:keep-all;line-break:strict;overflow-y:auto;overflow-x:hidden}.text-input-overlay[contenteditable].vertical:empty:before{content:"縦書きテキスト";color:#999;pointer-events:none;position:absolute;top:4px;left:4px;writing-mode:vertical-rl;-webkit-writing-mode:vertical-rl;text-orientation:upright;-webkit-text-orientation:upright}.export-menu{position:absolute;top:60px;right:10px;background:#fff;border:1px solid #e0e0e0;border-radius:8px;box-shadow:0 4px 12px #00000026;z-index:1000;min-width:120px;overflow:hidden}.export-option{display:block;width:100%;padding:12px 16px;border:none;background:#fff;color:#333;font-size:14px;font-family:inherit;text-align:left;cursor:pointer;transition:background-color .2s ease;border-radius:0}.export-option:hover{background-color:#f5f5f5}.export-option:active{background-color:#e8e8e8}.export-option:not(:last-child){border-bottom:1px solid #f0f0f0}@media (pointer: coarse){.export-option{padding:16px 20px;font-size:16px}}.custom-confirm-dialog{position:fixed;top:0;left:0;width:100%;height:100%;z-index:10000}.confirm-dialog-backdrop{position:absolute;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;align-items:center;justify-content:center;padding:20px}.confirm-dialog-content{background:#fff;border-radius:12px;box-shadow:0 10px 30px #0000004d;max-width:350px;width:100%;animation:confirmDialogShow .3s ease-out}@keyframes confirmDialogShow{0%{opacity:0;transform:scale(.9) translateY(-10px)}to{opacity:1;transform:scale(1) translateY(0)}}.confirm-dialog-header{padding:20px 20px 10px;border-bottom:1px solid #e0e0e0}.confirm-dialog-header h3{font-size:18px;font-weight:600;color:#333;margin:0;font-family:Noto Sans JP,Hiragino Sans,Yu Gothic,Meiryo,sans-serif}.confirm-dialog-body{padding:20px}.confirm-dialog-body p{font-size:14px;line-height:1.5;color:#666;margin:0;font-family:Noto Sans JP,Hiragino Sans,Yu Gothic,Meiryo,sans-serif}.confirm-dialog-actions{padding:10px 20px 20px;display:flex;gap:10px;justify-content:flex-end}.confirm-btn-cancel,.confirm-btn-ok{padding:10px 20px;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease;font-family:Noto Sans JP,Hiragino Sans,Yu Gothic,Meiryo,sans-serif}.confirm-btn-cancel{background:#f5f5f5;color:#666}.confirm-btn-cancel:hover{background:#e8e8e8}.confirm-btn-ok{background:#ff4757;color:#fff}.confirm-btn-ok:hover{background:#ff3742}.confirm-btn-cancel:active,.confirm-btn-ok:active{transform:translateY(1px)}@media (pointer: coarse){.confirm-dialog-content{max-width:90vw}.confirm-btn-cancel,.confirm-btn-ok{padding:14px 24px;font-size:16px;min-height:44px}.confirm-dialog-actions{gap:12px}}
